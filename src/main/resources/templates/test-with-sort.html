<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test with sort</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.21.2/dist/bootstrap-table.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>

    <script type="text/javascript" th:src="@{/js/natural-sorting.js}"></script>

    <script th:inline="javascript">

        function sort(comparator) {
            var d = {};
            console.log(comparator);

            switch (comparator) {
                case 'compareByNameAsc':
                    d = [[${#lists.sort(contentItemDTOs, compareByNameAsc)}]];

<!--                    $("#btnSortByNameAsc").remove();-->
<!--                    $("#btnSortByNameAsc").hide();-->
<!--                    $("#btnSortByNameDesc").show();-->
<!--                        $('#btnSortByNameAsc').addClass("d-none");-->
<!--                        $('#btnSortByNameDesc').removeClass("d-none");-->
<!--                        $('#btnSortByNameDesc').attr('onClick','sort("compareByNameDesc")');-->
<!--                        $('btnSortByNameDesc')[0].setAttribute('onclick','test("hello")');-->
                break;
                case 'compareByNameDesc':
                    d = [[${#lists.sort(contentItemDTOs, compareByNameDesc)}]];
<!--                    $("#btnSortByNameDesc").hide();-->
<!--                    $("#btnSortByNameAsc").show();-->
<!--                        $('#btnSortByNameDesc').addClass("d-none");-->
<!--                        $('#btnSortByNameAsc').removeClass("d-none");-->
                break;
                default:
                    console.log('Comparator ' + comparator + ' not implemented.');
            }

            console.log(d);
            $('#table').bootstrapTable('destroy');
            $('#table').bootstrapTable({
                data: d
            });

            switch (comparator) {
                case 'compareByNameAsc':
                    $("th[data-field='name']").replaceWith('<th data-field="name" id="btnSortByNameDesc">name desc</th>');
<!--                    $("th[data-field='name']").load('http://localhost/html/name.html');-->
                break;
                case 'compareByNameDesc':
                    $("th[data-field='name']").replaceWith('<th data-field="name" id="btnSortByNameAsc">name asc</th>');
                break;
                default:
                    console.log('Comparator ' + comparator + 'for replaceWith switch not implemented.');
            }



            var value = $('#tfSearch').val().toLowerCase();;
            $('#table > tbody > tr').filter(function() {
              $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });

        }

        function test(msg) {
            alert(msg);

        }


        $(document).ready(function(){

<!--            $("#btnSortByNameDesc").hide();-->
<!--            $('#btnSortByNameDesc').addClass("d-none");-->





$(document).on('click','#btnSortByNameAsc', function() {
    sort('compareByNameAsc');
});


$(document).on('click','#btnSortByNameDesc', function() {
<!--    $('#btnSortByNameAsc').replaceWith('<th data-field="name" id="btnSortByNameDesc")">name desc</th>');-->
    sort('compareByNameDesc');

<!--    $('#btnSortByNameDesc').click(function() {-->
<!--        $('#btnSortByNameDesc').replaceWith('<th data-field="name" id="btnSortByNameAsc")">name asc</th>');-->
<!--        sort('compareByNameDesc');-->
});




<!--});-->

<!--            $('#btnSortByNameAsc').click(function() {-->
<!--                alert('btnSortByNameAsc');-->
<!--                $('#btnSortByNameAsc').replaceWith('<th data-field="name" id="btnSortByNameDesc")">name desc</th>');-->
<!--            });-->

<!--            $('#btnSortByNameDesc').click(function() {-->
<!--                alert('btnSortByNameDesc');-->
<!--                $('#btnSortByNameAsc').replaceWith('<th data-field="name" id="btnSortByNameAsc")">name asc</th>');-->
<!--            });-->


            $('#tfSearch').on('keyup', function() {
                var value = $(this).val().toLowerCase();
                $('#table > tbody > tr').filter(function() {
                  $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });


    </script>


</head>
<body>
<h1>
    <a th:href="@{/}">[ home ]</a>
    Test with sort
</h1>
<button type="button" id="btnCompareByNameAsc" onclick="sort('compareByNameAsc')">compareByNameAsc</button>
<button type="button" id="btnCompareByNameDesc" onclick="sort('compareByNameDesc')">compareByNameDesc</button>


<input class="form-control" id="tfSearch" type="text" placeholder="Search..">

<table class="table table-hover" id="table">
    <thead>
    <tr>
        <th data-field="name" id="btnSortByNameAsc">name asc</th>
<!--        <th data-field="name" id="btnSortByNameDesc" class="d-none">name desc</th>-->
<!--        <th data-field="name" id="btnSortByNameAsc">name asc</th>-->
        <th data-field="sizeInBytes">sizeInBytes</th>
        <th data-field="size">size</th>
        <th data-field="last_modified">last_modified</th>

<!--        <th data-field="name" data-sortable="true" data-sorter="alphanum">name</th>-->
<!--        <th data-field="sizeInBytes" data-sortable="true">sizeInBytes</th>-->
<!--        <th data-field="size" data-sortable="true">size</th>-->
<!--        <th data-field="last_modified" data-sortable="true">last_modified</th>-->
        
        
    </tr>
    </thead>
    <tbody>
    <th:block th:each="dto : ${contentItemDTOs}">
        <tr>
            <td th:text="${dto.name}">Hello.txt</td>
            <td th:text="${dto.sizeInBytes}">5</td>
            <td th:text="${dto.size}">5 bytes</td>
            <td th:text="${dto.last_modified}">2022-03-07T15:42:26</td>
        </tr>
    </th:block>
    </tbody>
</table>
</body>
</html>

